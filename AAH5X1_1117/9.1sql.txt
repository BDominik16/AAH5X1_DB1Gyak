CREATE TABLE GYARTO(
    adoszam INT PRIMARY KEY, 
    nev CHAR(30), 
    iranyitoszam CHAR(4), 
    varos char(40), 
    utca char(100));
    
CREATE TABLE TERMEK(
    tkod INT PRIMARY KEY, 
    nev CHAR(30), 
    ear INT CHECK(ear>0), 
    gyarto INT);
CREATE TABLE EGYSEGEK(
    aru INT, 
    db INT CHECK(db>0));
CREATE TABLE ALKATRESZ(
    akod INT PRIMARY KEY, 
    nev CHAR(30));
CREATE TABLE KOMPONENS(
    termek INT, 
    alkatresz INT);

ALTER TABLE `termek` ADD FOREIGN KEY (`gyarto`) REFERENCES `gyarto`(`adoszam`) ON DELETE RESTRICT ON UPDATE RESTRICT; 
ALTER TABLE `egysegek` ADD FOREIGN KEY (`aru`) REFERENCES `termek`(`tkod`) ON DELETE RESTRICT ON UPDATE RESTRICT; 
ALTER TABLE `komponens` ADD FOREIGN KEY (`termek`) REFERENCES `termek`(`nev`) ON DELETE RESTRICT ON UPDATE RESTRICT; 
ALTER TABLE `komponens` ADD FOREIGN KEY (`alkatresz`) REFERENCES `alkatresz`(`akod`) ON DELETE RESTRICT ON UPDATE RESTRICT;

INSERT INTO GYARTO VALUES(11111111, "lidl", 2402, "Miskolc", "Budapets utca");
INSERT INTO GYARTO VALUES(22222222, "tesco", 4321, "Mezőkövesd", "Kinizsi utca");
INSERT INTO GYARTO VALUES(33333333, "praktiker", 5234, "Mezőcsát", "Igazak utca");
INSERT INTO GYARTO VALUES(44444444, "auchan", 1101, "Mezőkeresztes", "Arany utca");
INSERT INTO GYARTO VALUES(55555555, "coop", 3216, "Kövesd", "János utca");

INSERT INTO TERMEK VALUES(0, "lámpa", 10000, 11111111);
INSERT INTO TERMEK VALUES(1, "gereblye", 1500, 22222222);
INSERT INTO TERMEK VALUES(2, "kapa", 6000, 11111111);
INSERT INTO TERMEK VALUES(3, "egér", 12000, 22222222);
INSERT INTO TERMEK VALUES(4, "lámpa", 11200, 11111111);

INSERT INTO EGYSEGEK VALUES(0, 117);
INSERT INTO EGYSEGEK VALUES(1, 157);
INSERT INTO EGYSEGEK VALUES(2, 373);
INSERT INTO EGYSEGEK VALUES(3, 3000);
INSERT INTO EGYSEGEK VALUES(4, 20);

INSERT INTO ALKATRESZ VALUES(00, "Rúgó");
INSERT INTO ALKATRESZ VALUES(01, "Csavar");
INSERT INTO ALKATRESZ VALUES(02, "Szög");
INSERT INTO ALKATRESZ VALUES(03, "Fogaskerék");
INSERT INTO ALKATRESZ VALUES(04, "Kulcs");

INSERT INTO KOMPONENS VALUES(2, 04);
INSERT INTO KOMPONENS VALUES(3, 03);
INSERT INTO KOMPONENS VALUES(0, 01);
INSERT INTO KOMPONENS VALUES(3, 03);
INSERT INTO KOMPONENS VALUES(0, 03);

SELECT nev 
FROM gyarto WHERE adoszam in(SELECT gyarto FROM termek);

SELECT tkod
FROM termek WHERE nev LIKE '%tej%';

SELECT termek.nev, gyarto.nev
FROM termek JOIN gyarto; 